#change the project in the code
#git clone https://github.com/luismendezescobar/myproy.git

cd myproy/python/flask/pets-adopt
docker build -t pets-image .

PROJECT_ID="triggering-a-198-9f5f2f49"
docker tag pets-image gcr.io/$PROJECT_ID/pets-image:v1
docker push gcr.io/$PROJECT_ID/pets-image:v1



docker tag pets-image us-docker.pkg.dev/$PROJECT_ID/pets-image:v1



PROJECT_ID="playground-s-11-57768110"
docker build -t pets-image .


gcloud services enable artifactregistry.googleapis.com

gcloud artifacts repositories create quickstart-docker-repo --repository-format=docker \
--location=us-central1 --description="Docker repository"


gcloud auth configure-docker us-central1-docker.pkg.dev
docker tag pets-image us-central1-docker.pkg.dev/$PROJECT_ID/quickstart-docker-repo/pets-image:v1
docker push us-central1-docker.pkg.dev/$PROJECT_ID/quickstart-docker-repo/pets-image:v1

docker pull \
    us-central1-docker.pkg.dev/triggering-a-198-f6ace160/quickstart-docker-repo/pets-image:v1


#----------------------------------------------------------------------
#or with this way
#creates and uploads the container to google containe registry
gcloud builds submit --tag gcr.io/${DEVSHELL_PROJECT_ID}/pets-adopt:01 pets-adopt/

#deploys the container to cloud run
gcloud run deploy pets-adopt --image gcr.io/$DEVSHELL_PROJECT_ID/pets-adopt:02 --region us-central1 \
--platform managed --allow-unauthenticated --memory 2Gi --cpu 2 --max-instances 1 \
--port 80

gcr.io/playground-s-11-9508b0fe/pets-adopt


or with cloud build
permisions required
1. iam account user for the cloud build account, example 866336209015@cloudbuild.gserviceaccount.com
over the compute engine account (is the default being used by cloud run)
2. cloud run admin over the cluid build account



